<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Lean Billionaire Factory</title>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Sarabun:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', 'Sarabun', sans-serif;
        }

        input,
        select,
        textarea,
        button {
            font-family: 'Sarabun', sans-serif;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #d4d4d8;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1aa;
        }

        /* Animations */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translate(-50%, -20px);
            }

            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

        .animate-fade-in-down {
            animation: fadeInDown 0.3s ease-out forwards;
        }
    </style>
</head>

<body class="bg-zinc-50 text-zinc-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons ---
        const UploadIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><polyline points="17 8 12 3 7 8" /><line x1="12" x2="12" y1="3" y2="15" /></svg>
        );
        const XIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18" /><path d="m6 6 12 12" /></svg>
        );
        const CheckIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12" /></svg>
        );
        const AlertCircleIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10" /><line x1="12" x2="12" y1="8" y2="12" /><line x1="12" x2="12.01" y1="16" y2="16" /></svg>
        );

        // --- Notification Component ---
        const Notification = ({ message, type, onClose }) => {
            useEffect(() => {
                const timer = setTimeout(onClose, 3000);
                return () => clearTimeout(timer);
            }, [onClose]);

            return (
                <div className={`fixed top-6 left-1/2 transform -translate-x-1/2 z-50 flex items-center gap-3 px-6 py-4 rounded-lg shadow-xl border ${type === 'error' ? 'bg-red-50 border-red-200 text-red-800' : 'bg-zinc-900 border-zinc-800 text-white'
                    } transition-all duration-300 animate-fade-in-down`}>
                    {type === 'error' ? <AlertCircleIcon className="w-5 h-5" /> : <CheckIcon className="w-5 h-5" />}
                    <span className="font-medium">{message}</span>
                </div>
            );
        };

        // --- Main Component ---
        function ContentFactory() {
            const [formData, setFormData] = useState({
                email: '',
                contentType: '',
                postDesign: '', // Production Type
                selectedCard: '',
                salesContent: '',
                knowledgeContent: '',
                platform: '',
                image: null
            });
            const [isGenerating, setIsGenerating] = useState(false);
            const [imagePreview, setImagePreview] = useState(null);
            const [notification, setNotification] = useState(null);

            const oracleCards = [
                'The Fool', 'The Magician', 'The High Priestess', 'The Empress',
                'The Emperor', 'The Hierophant', 'The Lovers', 'The Chariot',
                'Strength', 'The Hermit', 'Wheel of Fortune', 'Justice',
                'The Hanged Man', 'Death', 'Temperance', 'The Devil',
                'The Tower', 'The Star', 'The Moon', 'The Sun',
                'Judgement', 'The World'
            ];

            const postDesigns = [
                'Short Clip Video',
                'Photo',
                'Info Graphic',
                'Square Post',
                'Carousels'
            ];

            const platforms = ['TikTok', 'Facebook Reels', 'YouTube Shorts', 'Instagram'];

            const showNotification = (message, type = 'success') => {
                setNotification({ message, type });
            };

            const handleImageUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    if (!file.type.startsWith('image/')) {
                        showNotification('กรุณาอัพโหลดไฟล์รูปภาพเท่านั้น', 'error');
                        return;
                    }
                    if (file.size > 5 * 1024 * 1024) {
                        showNotification('ขนาดไฟล์ต้องไม่เกิน 5MB', 'error');
                        return;
                    }
                    setFormData({ ...formData, image: file });
                    const reader = new FileReader();
                    reader.onload = (e) => setImagePreview(e.target.result);
                    reader.readAsDataURL(file);
                }
            };

            const removeImage = () => {
                setFormData({ ...formData, image: null });
                setImagePreview(null);
            };

            const handleReset = () => {
                setFormData({
                    email: '',
                    contentType: '',
                    postDesign: '',
                    selectedCard: '',
                    salesContent: '',
                    knowledgeContent: '',
                    platform: '',
                    image: null
                });
                setImagePreview(null);
            };

            // --- Updated Submit Function ---
            const handleSubmit = async () => {
                // 1. Validation
                if (!formData.email || !formData.contentType || !formData.postDesign || !formData.platform) {
                    showNotification('กรุณากรอกข้อมูลที่จำเป็นให้ครบถ้วน', 'error');
                    return;
                }
                if (formData.contentType === 'knowledge' && !formData.selectedCard) {
                    showNotification('กรุณาเลือกไพ่ที่ต้องการ', 'error');
                    return;
                }
                if (formData.contentType === 'sales' && !formData.salesContent) {
                    showNotification('กรุณากรอกรายละเอียดสินค้า', 'error');
                    return;
                }

                setIsGenerating(true);

                // 2. Prepare FormData
                const data = new FormData();

                // --- Updated Fields ---
                data.append('main_category', 'The Lean Billionaire Factory'); // ประเภทหลัก
                data.append('user_email', formData.email);
                data.append('category', formData.contentType);
                data.append('post_format', formData.postDesign); // Production Type
                data.append('item_id', formData.selectedCard || '');
                data.append('platform', formData.platform);

                // Logic เลือก Text Input
                const finalContent = formData.contentType === 'sales'
                    ? formData.salesContent
                    : formData.knowledgeContent;
                data.append('raw_text', finalContent || '');

                if (formData.image) {
                    data.append('file_asset', formData.image);
                }

                try {
                    // 3. Send to Webhook
                    const response = await fetch('https://hook.us2.make.com/3kcyu1ygkc8fjv19193apv8oxfhd1c6h', {
                        method: 'POST',
                        body: data
                    });

                    if (response.ok) {
                        showNotification('✨ ส่งคำสั่งเรียบร้อย กรุณาตรวจสอบอีเมล', 'success');
                        handleReset(); // ล้างช่องข้อมูลเมื่อส่งสำเร็จ
                    } else {
                        showNotification('ระบบขัดข้องเล็กน้อย กรุณาลองใหม่', 'error');
                    }
                } catch (e) {
                    console.error('Submission error:', e);
                    showNotification('ไม่สามารถเชื่อมต่อเครื่องจักรได้', 'error');
                } finally {
                    setIsGenerating(false);
                }
            };

            return (
                <div className="min-h-screen bg-zinc-50 pb-20">
                    {notification && (
                        <Notification
                            message={notification.message}
                            type={notification.type}
                            onClose={() => setNotification(null)}
                        />
                    )}

                    <div className="max-w-4xl mx-auto px-6 py-16">
                        {/* Header */}
                        <header className="mb-16 text-center">
                            <h1 className="text-4xl md:text-6xl font-light tracking-tight text-zinc-900 mb-3" style={{ fontFamily: 'Inter' }}>
                                CONTENT FACTORY
                            </h1>
                            <div className="w-20 h-px bg-zinc-900 mx-auto"></div>
                        </header>

                        {/* Form Container */}
                        <div className="space-y-10 bg-white p-8 md:p-12 rounded-2xl shadow-sm border border-zinc-100">

                            {/* Email */}
                            <div className="group">
                                <label className="block text-sm font-medium text-zinc-500 mb-2 tracking-wide uppercase">
                                    อีเมลของคุณ
                                </label>
                                <input
                                    type="email"
                                    value={formData.email}
                                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                                    placeholder="name@domain.com"
                                    className="w-full px-0 py-4 bg-transparent border-b-2 border-zinc-200 focus:border-zinc-900 outline-none transition-colors text-lg text-zinc-900 placeholder-zinc-300"
                                />
                            </div>

                            {/* Content Type */}
                            <div className="group">
                                <label className="block text-sm font-medium text-zinc-500 mb-4 tracking-wide uppercase">
                                    ประเภทคอนเทนต์
                                </label>
                                <div className="grid grid-cols-2 gap-4">
                                    {[
                                        { id: 'knowledge', label: 'สายความรู้' },
                                        { id: 'sales', label: 'สายขายของ' }
                                    ].map((type) => (
                                        <button
                                            key={type.id}
                                            onClick={() => setFormData({ ...formData, contentType: type.id })}
                                            className={`py-5 text-center border-2 transition-all rounded-lg ${formData.contentType === type.id
                                                    ? 'bg-zinc-900 text-white border-zinc-900 shadow-lg transform scale-[1.02]'
                                                    : 'bg-white text-zinc-600 border-zinc-200 hover:border-zinc-400 hover:bg-zinc-50'
                                                }`}
                                        >
                                            <span className="text-base font-medium">{type.label}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>

                            {/* Post Design Type */}
                            <div className="group">
                                <label className="block text-sm font-medium text-zinc-500 mb-3 tracking-wide uppercase">
                                    รูปแบบการออกแบบ (Production Type)
                                </label>
                                <div className="relative">
                                    <select
                                        value={formData.postDesign}
                                        onChange={(e) => setFormData({ ...formData, postDesign: e.target.value })}
                                        className="w-full px-0 py-4 bg-transparent border-b-2 border-zinc-200 focus:border-zinc-900 outline-none transition-colors text-lg text-zinc-900 cursor-pointer appearance-none"
                                    >
                                        <option value="" disabled>เลือกรูปแบบ</option>
                                        {postDesigns.map((design, idx) => (
                                            <option key={idx} value={design}>{design}</option>
                                        ))}
                                    </select>
                                    <div className="absolute right-0 top-1/2 transform -translate-y-1/2 pointer-events-none text-zinc-400">
                                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m6 9 6 6 6-6" /></svg>
                                    </div>
                                </div>
                            </div>

                            {/* Conditional: Knowledge */}
                            {formData.contentType === 'knowledge' && (
                                <div className="space-y-6 animate-fade-in-up">
                                    <div className="group">
                                        <label className="block text-sm font-medium text-zinc-500 mb-3 tracking-wide uppercase">
                                            เลือกไพ่
                                        </label>
                                        <div className="relative">
                                            <select
                                                value={formData.selectedCard}
                                                onChange={(e) => setFormData({ ...formData, selectedCard: e.target.value })}
                                                className="w-full px-0 py-4 bg-transparent border-b-2 border-zinc-200 focus:border-zinc-900 outline-none transition-colors text-lg text-zinc-900 cursor-pointer appearance-none"
                                            >
                                                <option value="" disabled>เลือกไพ่ที่ต้องการ</option>
                                                {oracleCards.map((card, idx) => (
                                                    <option key={idx} value={card}>{card}</option>
                                                ))}
                                            </select>
                                            <div className="absolute right-0 top-1/2 transform -translate-y-1/2 pointer-events-none text-zinc-400">
                                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m6 9 6 6 6-6" /></svg>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="group">
                                        <label className="block text-sm font-medium text-zinc-500 mb-3 tracking-wide uppercase">
                                            รายละเอียดเนื้อหาเพิ่มเติม
                                        </label>
                                        <textarea
                                            value={formData.knowledgeContent}
                                            onChange={(e) => setFormData({ ...formData, knowledgeContent: e.target.value })}
                                            placeholder="ระบุบริบท หรือเนื้อหาที่ต้องการเน้นเพิ่มเติม..."
                                            rows="6"
                                            className="w-full px-4 py-4 bg-zinc-50 border border-zinc-200 rounded-lg focus:border-zinc-900 focus:ring-1 focus:ring-zinc-900 outline-none transition-all text-lg text-zinc-900 placeholder-zinc-300 resize-none"
                                        />
                                    </div>
                                </div>
                            )}

                            {/* Conditional: Sales */}
                            {formData.contentType === 'sales' && (
                                <div className="group animate-fade-in-up">
                                    <label className="block text-sm font-medium text-zinc-500 mb-3 tracking-wide uppercase">
                                        รายละเอียดสินค้า
                                    </label>
                                    <textarea
                                        value={formData.salesContent}
                                        onChange={(e) => setFormData({ ...formData, salesContent: e.target.value })}
                                        placeholder="กรอกรายละเอียดสินค้าที่ต้องการสร้างคอนเทนต์..."
                                        rows="6"
                                        className="w-full px-4 py-4 bg-zinc-50 border border-zinc-200 rounded-lg focus:border-zinc-900 focus:ring-1 focus:ring-zinc-900 outline-none transition-all text-lg text-zinc-900 placeholder-zinc-300 resize-none"
                                    />
                                </div>
                            )}

                            {/* Platform */}
                            <div className="group">
                                <label className="block text-sm font-medium text-zinc-500 mb-3 tracking-wide uppercase">
                                    แพลตฟอร์ม
                                </label>
                                <div className="relative">
                                    <select
                                        value={formData.platform}
                                        onChange={(e) => setFormData({ ...formData, platform: e.target.value })}
                                        className="w-full px-0 py-4 bg-transparent border-b-2 border-zinc-200 focus:border-zinc-900 outline-none transition-colors text-lg text-zinc-900 cursor-pointer appearance-none"
                                    >
                                        <option value="" disabled>เลือกแพลตฟอร์ม</option>
                                        {platforms.map((platform, idx) => (
                                            <option key={idx} value={platform}>{platform}</option>
                                        ))}
                                    </select>
                                    <div className="absolute right-0 top-1/2 transform -translate-y-1/2 pointer-events-none text-zinc-400">
                                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m6 9 6 6 6-6" /></svg>
                                    </div>
                                </div>
                            </div>

                            {/* Image Upload */}
                            <div className="group">
                                <label className="block text-sm font-medium text-zinc-500 mb-4 tracking-wide uppercase">
                                    อัพโหลดรูปภาพ
                                </label>
                                {imagePreview ? (
                                    <div className="relative inline-block group/image">
                                        <img
                                            src={imagePreview}
                                            alt="Preview"
                                            className="w-full md:w-80 h-80 object-cover rounded-lg border border-zinc-200 shadow-sm"
                                        />
                                        <div className="absolute inset-0 bg-black/0 group-hover/image:bg-black/10 transition-colors rounded-lg"></div>
                                        <button
                                            onClick={removeImage}
                                            className="absolute top-2 right-2 p-2 bg-white rounded-full shadow-md hover:bg-zinc-100 transition-colors transform hover:scale-110"
                                        >
                                            <XIcon className="w-5 h-5 text-zinc-700" />
                                        </button>
                                    </div>
                                ) : (
                                    <label className="block w-full cursor-pointer group hover:bg-zinc-50 transition-colors rounded-xl overflow-hidden">
                                        <div className="border-2 border-dashed border-zinc-300 group-hover:border-zinc-500 transition-colors p-16 text-center rounded-xl">
                                            <div className="w-16 h-16 bg-zinc-100 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-zinc-200 transition-colors">
                                                <UploadIcon className="w-8 h-8 text-zinc-400 group-hover:text-zinc-600 transition-colors" />
                                            </div>
                                            <p className="text-zinc-600 font-medium">คลิกเพื่ออัพโหลดรูปภาพ</p>
                                            <p className="text-zinc-400 text-sm mt-2">JPG, PNG, WEBP (สูงสุด 5MB)</p>
                                        </div>
                                        <input
                                            type="file"
                                            accept="image/jpeg,image/png,image/jpg,image/webp"
                                            onChange={handleImageUpload}
                                            className="hidden"
                                        />
                                    </label>
                                )}
                            </div>

                            {/* Action Buttons */}
                            <div className="flex flex-col md:flex-row gap-4 pt-8">
                                <button
                                    onClick={handleReset}
                                    className="order-2 md:order-1 flex-1 py-4 bg-white text-zinc-900 border-2 border-zinc-900 font-medium rounded-lg hover:bg-zinc-50 transition-colors focus:ring-4 focus:ring-zinc-200"
                                >
                                    รีเซ็ต
                                </button>
                                <button
                                    onClick={handleSubmit}
                                    disabled={isGenerating}
                                    className="order-1 md:order-2 flex-1 py-4 bg-zinc-900 text-white border-2 border-zinc-900 font-medium rounded-lg hover:bg-zinc-800 hover:border-zinc-800 transition-all shadow-lg hover:shadow-xl disabled:opacity-70 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-3"
                                >
                                    {isGenerating ? (
                                        <>
                                            <div className="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                                            <span>กำลังสร้าง...</span>
                                        </>
                                    ) : (
                                        <>
                                            <CheckIcon className="w-5 h-5" />
                                            <span>สร้างคอนเทนต์</span>
                                        </>
                                    )}
                                </button>
                            </div>
                        </div>

                        {/* Footer */}
                        <footer className="mt-20 text-center">
                            <p className="text-xs font-medium text-zinc-400 tracking-widest uppercase">
                                Powered by <span className="text-zinc-600">iDEAS365</span> × <span className="text-zinc-600">STRATEGIC AI</span>
                            </p>
                        </footer>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ContentFactory />);
    </script>
</body>

</html>